{% extends 'layouts/base.html.twig' %}

{% block title %}{{ job.title }} - Aviyon Careers{% endblock %}

{% block body %}
<div class="relative bg-gray-900 text-white min-h-screen font-inter overflow-hidden">
    <!-- Subtle Neural Network Background -->
    <div class="absolute inset-0 z-0 opacity-10">
        <canvas id="neural-canvas" class="w-full h-full"></canvas>
    </div>

    <!-- Hero Section -->
    <section class="relative py-20 flex items-center justify-center">
        <div class="relative z-20 text-center px-6">
            <h1 class="text-3xl md:text-4xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-indigo-600 mb-6 border-b-2 border-indigo-500/20 pb-2">{{ job.title }}</h1>
            <p class="text-2xl md:text-4xl text-gray-200 mb-8">{{ job.company }}</p>
            <a href="{{ path('careers_apply', {'id': job.id}) }}" class="bg-neon-purple text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-purple-700 transition transform hover:scale-105">Apply Now</a>
            <a href="{{ path('careers') }}" class="ml-4 bg-gray-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-500 transition transform hover:scale-105">Back to Careers</a>
        </div>
    </section>

    <!-- Job Overview Section -->
    <section class="relative py-20 px-6 md:px-12 bg-gray-800">
        <div class="container mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <div class="md:col-span-2">
                    <h2 class="text-4xl font-bold text-neon-purple mb-6">Job Overview</h2>
                    <p class="text-gray-200 text-lg leading-relaxed mb-6">{{ job.description }}</p>
                    <p class="text-gray-200 text-lg mb-2"><strong>Location:</strong> {{ job.location }}</p>
                    <p class="text-gray-200 text-lg mb-2"><strong>Department:</strong> {{ job.department }}</p>
                    <p class="text-gray-200 text-lg mb-6"><strong>Requirements:</strong> {{ job.requirements }}</p>
                </div>
                <div class="bg-gray-900 p-6 rounded-xl shadow-lg transform hover:scale-105 transition">
                    <h3 class="text-2xl font-semibold text-neon-purple mb-4">Quick Stats</h3>
                    <p class="text-gray-200 mb-2"><strong>Salary Range:</strong> $500K - $1M+</p>
                    <p class="text-gray-200 mb-2"><strong>Equity:</strong> Up to 0.5%</p>
                    <p class="text-gray-200 mb-2"><strong>Bonus:</strong> Up to $5M</p>
                    <p class="text-gray-200"><strong>Team Size:</strong> 50-200</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Responsibilities Section -->
    <section class="relative py-20 px-6 md:px-12 bg-gray-900">
        <div class="container mx-auto">
            <h2 class="text-4xl font-bold text-neon-purple mb-12 text-center">Key Responsibilities</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:-translate-y-2 transition">
                    <h3 class="text-xl font-semibold text-neon-purple mb-4">Leadership</h3>
                    <p class="text-gray-200">Guide cross-functional teams to achieve strategic goals and innovate within {{ job.company }}.</p>
                </div>
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:-translate-y-2 transition">
                    <h3 class="text-xl font-semibold text-neon-purple mb-4">Innovation</h3>
                    <p class="text-gray-200">Drive cutting-edge projects in {{ job.department }}, pushing the boundaries of technology.</p>
                </div>
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:-translate-y-2 transition">
                    <h3 class="text-xl font-semibold text-neon-purple mb-4">Collaboration</h3>
                    <p class="text-gray-200">Work with global teams to integrate solutions across the Kodoverse ecosystem.</p>
                </div>
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:-translate-y-2 transition">
                    <h3 class="text-xl font-semibold text-neon-purple mb-4">Impact</h3>
                    <p class="text-gray-200">Shape the future of {{ job.company }} with initiatives that redefine industries.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Benefits Section -->
    <section class="relative py-20 px-6 md:px-12 bg-gray-800">
        <div class="container mx-auto">
            <h2 class="text-4xl font-bold text-neon-purple mb-12 text-center">Why Join {{ job.company }}?</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center transform hover:scale-105 transition">
                    <h3 class="text-2xl font-semibold text-neon-purple mb-4">Elite Compensation</h3>
                    <p class="text-gray-200">Salaries up to $1M+, equity awards, and bonuses up to $5M for top performers.</p>
                </div>
                <div class="text-center transform hover:scale-105 transition">
                    <h3 class="text-2xl font-semibold text-neon-purple mb-4">Cutting-Edge Innovation</h3>
                    <p class="text-gray-200">Work on ASI/AGI, VR, and urban projects with state-of-the-art tools.</p>
                </div>
                <div class="text-center transform hover:scale-105 transition">
                    <h3 class="text-2xl font-semibold text-neon-purple mb-4">Global Impact</h3>
                    <p class="text-gray-200">Shape a mission that transforms industries and elevates humanity.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="relative py-20 px-6 md:px-12 bg-gray-900">
        <div class="container mx-auto">
            <h2 class="text-4xl font-bold text-neon-purple mb-12 text-center">What Our Team Says</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:-translate-y-2 transition">
                    <p class="text-gray-200 italic mb-4">"Working at {{ job.company }} has been a game-changer. The innovation here is unparalleled."</p>
                    <p class="text-neon-purple font-semibold">— Alex R., Senior Engineer</p>
                </div>
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:-translate-y-2 transition">
                    <p class="text-gray-200 italic mb-4">"The culture at {{ job.company }} fosters creativity and growth like nowhere else."</p>
                    <p class="text-neon-purple font-semibold">— Maya K., Creative Director</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Related Jobs Section -->
    <section class="relative py-20 px-6 md:px-12 bg-gray-800">
        <div class="container mx-auto">
            <h2 class="text-4xl font-bold text-neon-purple mb-12 text-center">Explore Similar Roles</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                {% for related_job in jobs|filter(j => j.id != job.id and j.department == job.department)|slice(0, 3) %}
                    <div class="bg-gray-900 p-6 rounded-xl shadow-lg transform hover:-translate-y-2 transition">
                        <h3 class="text-xl font-semibold text-white mb-2">{{ related_job.title }}</h3>
                        <p class="text-gray-300 mb-4">{{ related_job.description }}</p>
                        <a href="{{ path('careers_job', {'id': related_job.id}) }}" class="inline-block bg-neon-purple text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">View Details</a>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="relative py-20 px-6 bg-neon-purple text-white text-center">
        <h2 class="text-4xl md:text-5xl font-bold mb-6">Ready to Shape the Future?</h2>
        <p class="text-lg md:text-xl mb-8">Join {{ job.company }} and redefine what’s possible.</p>
        <a href="{{ path('careers_apply', {'id': job.id}) }}" class="bg-white text-neon-purple px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-200 transition transform hover:scale-105">Apply Now</a>
    </section>
</div>

<!-- Inline JavaScript for Neural Network Background -->
<script>
    // Subtle Neural Network Background
    const canvas = document.getElementById('neural-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];
    const particleCount = 40;

    class Particle {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 1.5 + 0.5;
            this.speedX = Math.random() * 0.3 - 0.15;
            this.speedY = Math.random() * 0.3 - 0.15;
        }
        update() {
            this.x += this.speedX;
            this.y += this.speedY;
            if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
            if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
        }
        draw() {
            ctx.fillStyle = 'rgba(139, 92, 246, 0.8)';
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    for (let i = 0; i < particleCount; i++) {
        particles.push(new Particle());
    }

    function animateNeural() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => {
            p.update();
            p.draw();
            particles.forEach(p2 => {
                const dx = p.x - p2.x;
                const dy = p.y - p2.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < 60) {
                    ctx.beginPath();
                    ctx.strokeStyle = `rgba(139, 92, 246, ${0.15 - distance / 400})`;
                    ctx.lineWidth = 0.8;
                    ctx.moveTo(p.x, p.y);
                    ctx.lineTo(p2.x, p2.y);
                    ctx.stroke();
                }
            });
        });
        requestAnimationFrame(animateNeural);
    }
    animateNeural();

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
</script>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <!-- Override to avoid loading newsletter.js -->
{% endblock %}
