<div class="header header-fallback flex items-center justify-between p-4">
    <!-- Left: Logo and Menu -->
    <div class="flex items-center space-x-4">
        <!-- Logo -->
        <div class="logo flex items-center">
            <svg class="w-6 h-6 mr-2 text-gray-300" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            <svg class="logo-svg" width="100" height="30" viewBox="0 0 100 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <text x="0" y="24" font-family="Inter, sans-serif" font-size="24" font-weight="600" fill="#e5e7eb">Aviyon</text>
                <circle cx="73" cy="6" r="2" fill="#10b981" /> <!-- Green dot on the 'i' -->
            </svg>
        </div>
        <!-- Menu Icon -->
        <button id="menu-toggle" class="text-gray-300 hover:text-white focus:outline-none">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
        </button>
        <div id="menu-dropdown" class="hidden absolute top-16 left-0 right-0 bg-gray-800 rounded-lg shadow-lg p-2 menu-dropdown-fallback">
            <a href="{{ path('app_root') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Home</a>
            <a href="{{ path('features') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Features</a>
            <a href="{{ path('about') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">About</a>
            <a href="{{ path('checkout') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Checkout</a>
            <a href="{{ path('domain') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Domain</a>
            <a href="{{ path('search') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Search</a>
            <a href="{{ path('user') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">User</a>
            <a href="{{ path('settings') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Settings</a>
            <a href="{{ path('dashboard') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Dashboard</a>
            <a href="{{ path('admin') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Admin</a>
            <button id="theme-toggle" class="block w-full text-left px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Toggle Light/Dark Mode</button>
        </div>
    </div>

    <!-- Center: Search -->
    <div class="flex-1 mx-4">
        <div class="relative">
            <input type="text" id="header-search" class="w-full p-2 bg-gray-800 border border-gray-800 rounded text-gray-200 focus:outline-none placeholder-gray-400 search-input-fallback" placeholder="Search...">
            <div id="search-dropdown" class="hidden absolute top-full left-0 right-0 bg-gray-800 rounded-lg shadow-lg mt-1 p-2 search-dropdown-fallback">
                <a href="#" class="block px-2 py-1 text-gray-200 hover:bg-gray-700">Search Result 1</a>
            </div>
        </div>
    </div>

    <!-- Right: Cart and User -->
    <div class="flex items-center space-x-4">
        <!-- Cart -->
        <div class="relative">
            <button id="cart-toggle" class="text-gray-300 hover:text-white focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                </svg>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs cart-count-fallback">2</span>
            </button>
            <div id="cart-dropdown" class="hidden absolute right-0 top-12 w-64 bg-gray-800 rounded-lg shadow-lg p-4 cart-dropdown-fallback">
                <div class="cart-item flex justify-between items-center mb-2">
                    <span class="text-gray-200">example.com</span>
                    <div>
                        <button class="text-gray-300 hover:text-white mx-1">-</button>
                        <span class="text-gray-200">1</span>
                        <button class="text-gray-300 hover:text-white mx-1">+</button>
                        <button class="text-red-500 hover:text-red-400 ml-2">Delete</button>
                    </div>
                </div>
                <p class="text-gray-200 mt-2">Total: $12.99</p>
                <button class="w-full mt-2 p-2 bg-green-500 text-white rounded hover:bg-green-600 checkout-button-fallback">Checkout</button>
            </div>
        </div>
        <!-- User -->
        <div class="relative">
            <button id="user-toggle" class="text-gray-300 hover:text-white focus:outline-none">
                <img src="/build/user-placeholder.jpg" alt="User" class="w-8 h-8 rounded-full user-image-fallback">
                <span id="notification-count" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs notification-count-fallback">3</span>
            </button>
            <div id="user-dropdown" class="hidden absolute right-0 top-12 w-48 bg-gray-800 rounded-lg shadow-lg p-2 user-dropdown-fallback">
                <a href="{{ path('user') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Profile</a>
                <a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Notifications (3)</a>
                <a href="{{ path('dashboard_messages') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Messages</a>
                <a href="{{ path('settings') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Settings</a>
                <a href="{{ path('app_logout') }}" class="block px-4 py-2 text-gray-200 hover:bg-gray-700 hover:text-white">Logout</a>
            </div>
            <!-- Login/Signup (if not logged in) -->
            <div id="auth-links" class="hidden ml-4 space-x-2" style="display: none;">
                <a href="{{ path('login') }}" class="text-gray-200 hover:text-white">Login</a>
                <a href="{{ path('signup') }}" class="text-gray-200 hover:text-white">Signup</a>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('menu-toggle').addEventListener('click', () => {
    document.getElementById('menu-dropdown').classList.toggle('hidden');
});

document.getElementById('cart-toggle').addEventListener('click', () => {
    document.getElementById('cart-dropdown').classList.toggle('hidden');
});

document.getElementById('user-toggle').addEventListener('click', () => {
    document.getElementById('user-dropdown').classList.toggle('hidden');
    document.getElementById('auth-links').classList.add('hidden');
});

document.getElementById('header-search').addEventListener('input', () => {
    const dropdown = document.getElementById('search-dropdown');
    dropdown.classList.remove('hidden');
    // Add dynamic search results logic here
});

document.getElementById('theme-toggle').addEventListener('click', () => {
    document.body.classList.toggle('light-mode');
});

// Toggle auth links based on user state (simplified logic)
const isLoggedIn = false; // Replace with actual auth check
if (!isLoggedIn) {
    document.getElementById('user-dropdown').classList.add('hidden');
    document.getElementById('auth-links').classList.remove('hidden');
}
</script>
