{% extends 'layouts/base.html.twig' %}

{% block title %}Aviyon - Explore{% endblock %}

{% block body %}
<section class="explore container py-12">
    <h1 class="text-4xl font-bold text-accent">Explore Aviyon</h1>
    <p class="text-secondary mt-4">Discover trending projects, NFTs, and community posts.</p>

    <div class="trending mt-8">
        <h2 class="text-3xl text-accent mb-4">Trending Now</h2>
        <div class="flex flex-wrap justify-between gap-8">
            {% for item in trending %}
                <div class="profile-card w-1/3">
                    <p class="text-secondary capitalize">{{ item.type }}</p>
                    {% if item.type == 'project' %}
                        <h3 class="text-accent">{{ item.name }}</h3>
                        <p class="text-secondary">By {{ item.creator }}</p>
                        <p class="text-secondary">Stars: {{ item.stars }}</p>
                        <button class="btn mt-2">Star</button>
                    {% elseif item.type == 'nft' %}
                        <canvas id="nft-{{ loop.index }}-preview" class="w-full h-48 mb-2"></canvas>
                        <h3 class="text-accent">{{ item.name }}</h3>
                        <p class="text-secondary">By {{ item.creator }}</p>
                        <p class="text-secondary">Price: {{ item.price }}</p>
                        <a href="{{ path('marketplace') }}" class="btn mt-2">View</a>
                    {% elseif item.type == 'post' %}
                        <p class="text-primary">{{ item.content|replace({'#': '<a href="' ~ path('search', {'q': '#\\1'}) ~ '" class="text-accent">#'})|replace({'@': '<a href="' ~ path('user_profile', {'username': '\\1'}) ~ '" class="text-accent">@'})|raw }}</p>
                        <p class="text-secondary">By {{ item.author }}</p>
                        <a href="{{ path('landing') }}" class="btn mt-2">View Post</a>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}
